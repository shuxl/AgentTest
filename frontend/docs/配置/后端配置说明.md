# 后端配置说明

## 📋 概述

前端项目设计为可以灵活对接多个后端服务，包括：

1. **Python 后端**：LangGraph Agent（`langGraphFlow/V2_0_Agent/`）
2. **Java 后端**：agentServer（`agentServer/`）

## 🔧 配置方式

### 方式一：环境变量配置（推荐）

通过 `.env` 文件配置后端地址：

```bash
# Python 后端
VITE_API_BASE_URL=http://localhost:8001

# Java 后端
# VITE_API_BASE_URL=http://localhost:9092
```

### 方式二：Vite 代理配置

开发环境下，`vite.config.ts` 中的代理配置会自动使用环境变量中的 `VITE_API_BASE_URL`。

## 📊 后端服务信息

### Python 后端（LangGraph Agent）

- **默认端口**：`8001`
- **服务地址**：`http://localhost:8001`
- **项目路径**：`langGraphFlow/V2_0_Agent/`
- **启动命令**：
  ```bash
  cd langGraphFlow/V2_0_Agent
  python 01_backendServer.py
  ```

### Java 后端（agentServer）

- **默认端口**：`9092`
- **服务地址**：`http://localhost:9092`
- **项目路径**：`agentServer/`
- **启动方式**：Spring Boot 应用

## 🔄 切换后端

### 开发环境

1. 编辑 `.env.development` 或创建 `.env` 文件
2. 修改 `VITE_API_BASE_URL` 为对应的后端地址
3. 重启开发服务器

```bash
# 切换到 Python 后端
VITE_API_BASE_URL=http://localhost:8001

# 切换到 Java 后端
VITE_API_BASE_URL=http://localhost:9092
```

### 生产环境

1. 编辑 `.env.production` 文件
2. 设置生产环境的后端地址
3. 重新构建项目

```bash
npm run build
```

## 📝 API 接口兼容性

前端设计时考虑了以下接口兼容性：

### 聊天接口

- **路径**：`POST /api/chat`
- **请求格式**：需要两个后端保持一致
- **响应格式**：需要两个后端保持一致

### 健康检查接口

- **路径**：`GET /health` 和 `GET /health/db`
- **响应格式**：需要两个后端保持一致

## ⚠️ 注意事项

1. **接口一致性**：确保两个后端的 API 接口格式保持一致
2. **CORS 配置**：确保后端服务配置了正确的 CORS 策略
3. **环境变量**：`.env` 文件不应提交到版本控制系统
4. **端口冲突**：确保后端服务端口不冲突

## 🔍 调试技巧

### 查看当前配置的后端地址

在浏览器控制台运行：

```javascript
console.log(import.meta.env.VITE_API_BASE_URL);
```

### 检查代理配置

开发环境下，检查 `vite.config.ts` 中的代理配置是否正确。

### 网络请求调试

使用浏览器开发者工具的 Network 面板，查看请求是否发送到正确的后端地址。

